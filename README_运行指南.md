# è‡ªåŠ¨å­¦ä¹ ç³»ç»Ÿ - è¿è¡ŒæŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚
- Python 3.8+
- Chrome/Chromium æµè§ˆå™¨
- 4GB+ å†…å­˜
- ç¨³å®šçš„ç½‘ç»œè¿æ¥

#### å®‰è£…ä¾èµ–
```bash
# 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®åˆ°æœ¬åœ°
cd auto_study

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python -m venv venv

# 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\\Scripts\\activate
# macOS/Linux:
source venv/bin/activate

# 4. å®‰è£…ä¾èµ–åŒ…
pip install -r requirements.txt

# 5. å®‰è£…Playwrightæµè§ˆå™¨
playwright install chromium
```

### 2. é…ç½®ç³»ç»Ÿ

#### åˆ›å»ºé…ç½®æ–‡ä»¶
å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶å¹¶ä¿®æ”¹ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š
```bash
# å­¦ä¹ å¹³å°é…ç½®
PLATFORM_URL=https://your-learning-platform.com
USERNAME=your_username
PASSWORD=your_password

# æµè§ˆå™¨é…ç½®
BROWSER_HEADLESS=false  # trueä¸ºæ— å¤´æ¨¡å¼ï¼Œfalseä¸ºå¯è§†åŒ–æ¨¡å¼
BROWSER_SLOW_MO=100     # æ“ä½œå»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰

# å­¦ä¹ é…ç½®
AUTO_ANSWER=true        # æ˜¯å¦è‡ªåŠ¨ç­”é¢˜
SKIP_COMPLETED=true     # è·³è¿‡å·²å®Œæˆè¯¾ç¨‹
LEARNING_SPEED=1.25     # æ’­æ”¾å€é€Ÿ

# ç³»ç»Ÿé…ç½®
LOG_LEVEL=INFO          # æ—¥å¿—çº§åˆ«
MAX_RETRIES=3           # æœ€å¤§é‡è¯•æ¬¡æ•°
```

### 3. è¿è¡Œç³»ç»Ÿ

#### å®Œæ•´è¿è¡Œï¼ˆæ¨èï¼‰
```bash
python run.py
```

è¿™å°†å¯åŠ¨å®Œæ•´çš„è‡ªåŠ¨å­¦ä¹ ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š
- é”™è¯¯æ¢å¤æœºåˆ¶
- ç›‘æ§ä¸æ—¥å¿—ç³»ç»Ÿ
- è‡ªåŠ¨å­¦ä¹ åŠŸèƒ½
- å´©æºƒæ£€æµ‹ä¸æ¢å¤

#### æ¼”ç¤ºæ¨¡å¼
```bash
# ç›‘æ§ç³»ç»Ÿæ¼”ç¤º
python run.py --monitoring-only

# æ¢å¤ç³»ç»Ÿæ¼”ç¤º
python run.py --recovery-only

# å®Œæ•´åŠŸèƒ½æ¼”ç¤º
python run.py --demo
```

#### åŸºç¡€è¿è¡Œï¼ˆä»…æ ¸å¿ƒåŠŸèƒ½ï¼‰
```bash
python -m src.auto_study.main
```

## ğŸ”§ ç³»ç»ŸåŠŸèƒ½è¯¦è§£

### é”™è¯¯æ¢å¤æœºåˆ¶

ç³»ç»Ÿå…·å¤‡å®Œæ•´çš„é”™è¯¯æ¢å¤èƒ½åŠ›ï¼š

#### è‡ªåŠ¨é‡è¯•
- **æ™ºèƒ½é”™è¯¯åˆ†ç±»**ï¼šç½‘ç»œé”™è¯¯ã€è®¤è¯é”™è¯¯ã€ç³»ç»Ÿé”™è¯¯ç­‰
- **æŒ‡æ•°é€€é¿ç­–ç•¥**ï¼šé¿å…é¢‘ç¹é‡è¯•é€ æˆçš„å‹åŠ›
- **è‡ªå®šä¹‰é‡è¯•ç­–ç•¥**ï¼šå¯é’ˆå¯¹ä¸åŒé”™è¯¯ç±»å‹é…ç½®é‡è¯•å‚æ•°

#### æ–­ç‚¹ç»­ä¼ 
- **ä»»åŠ¡çŠ¶æ€æŒä¹…åŒ–**ï¼šæ‰€æœ‰å­¦ä¹ ä»»åŠ¡çŠ¶æ€è‡ªåŠ¨ä¿å­˜
- **è¿›åº¦æ¢å¤**ï¼šç³»ç»Ÿé‡å¯åå¯ä»ä¸­æ–­ç‚¹ç»§ç»­
- **æ£€æŸ¥ç‚¹æœºåˆ¶**ï¼šå…³é”®æ­¥éª¤è‡ªåŠ¨åˆ›å»ºæ¢å¤ç‚¹

#### å´©æºƒæ¢å¤
- **è‡ªåŠ¨å´©æºƒæ£€æµ‹**ï¼šå¯åŠ¨æ—¶æ£€æµ‹å¼‚å¸¸é€€å‡º
- **èµ„æºæ¸…ç†**ï¼šè‡ªåŠ¨æ¸…ç†æ®‹ç•™æ–‡ä»¶å’Œè¿›ç¨‹é”
- **ä»»åŠ¡æ¢å¤**ï¼šæœªå®Œæˆä»»åŠ¡è‡ªåŠ¨æ¢å¤åˆ°å¯æ‰§è¡ŒçŠ¶æ€

### ç›‘æ§ä¸æ—¥å¿—ç³»ç»Ÿ

#### å®æ—¶ç›‘æ§ç•Œé¢
```bash
# å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºå®æ—¶ç›‘æ§ç•Œé¢
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ è‡ªåŠ¨å­¦ä¹ ç³»ç»Ÿç›‘æ§ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç³»ç»ŸçŠ¶æ€: è¿è¡Œä¸­     â”‚ CPU: 45%    å†…å­˜: 2.1GB/8GB    â”‚
â”‚ ä»»åŠ¡è¿›åº¦: 3/10      â”‚ ç½‘ç»œ: è‰¯å¥½   ç£ç›˜: 256GBå¯ç”¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ—¥å¿—è®°å½•
- **ç»“æ„åŒ–æ—¥å¿—**ï¼šJSONæ ¼å¼ï¼Œä¾¿äºåˆ†æ
- **å¤šçº§æ—¥å¿—**ï¼šDEBUGã€INFOã€WARNINGã€ERRORã€CRITICAL
- **åˆ†ç±»è®°å½•**ï¼šç³»ç»Ÿã€ç”¨æˆ·ã€è‡ªåŠ¨åŒ–ã€æµè§ˆå™¨ã€ç½‘ç»œã€æ€§èƒ½ã€å®‰å…¨
- **è‡ªåŠ¨è½®è½¬**ï¼šé˜²æ­¢æ—¥å¿—æ–‡ä»¶è¿‡å¤§

#### å‘Šè­¦ç³»ç»Ÿ
- **é”™è¯¯å³°å€¼æ£€æµ‹**ï¼šè¿ç»­é”™è¯¯è‡ªåŠ¨å‘Šè­¦
- **æ€§èƒ½å¼‚å¸¸æ£€æµ‹**ï¼šå“åº”æ—¶é—´å¼‚å¸¸æé†’
- **èµ„æºç›‘æ§**ï¼šCPUã€å†…å­˜ä½¿ç”¨ç‡å‘Šè­¦

### å­¦ä¹ è‡ªåŠ¨åŒ–åŠŸèƒ½

#### æ™ºèƒ½ç™»å½•
- **å¤šç§ç™»å½•æ–¹å¼**ï¼šç”¨æˆ·åå¯†ç ã€æ‰«ç ã€SSOç­‰
- **éªŒè¯ç è‡ªåŠ¨è¯†åˆ«**ï¼šæ”¯æŒå›¾åƒå’Œæ»‘å—éªŒè¯ç 
- **ç™»å½•çŠ¶æ€ä¿æŒ**ï¼šè‡ªåŠ¨ç»´æŠ¤ä¼šè¯æœ‰æ•ˆæ€§
- **åæ£€æµ‹æœºåˆ¶**ï¼šæ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸º

#### è¯¾ç¨‹ç®¡ç†
- **è‡ªåŠ¨å‘ç°è¯¾ç¨‹**ï¼šçˆ¬å–æ‰€æœ‰å¯å­¦ä¹ è¯¾ç¨‹
- **æ™ºèƒ½æ’åº**ï¼šæŒ‰ä¼˜å…ˆçº§ã€æˆªæ­¢æ—¶é—´æ’åº
- **è¿›åº¦è·Ÿè¸ª**ï¼šå®æ—¶æ›´æ–°å­¦ä¹ è¿›åº¦
- **çŠ¶æ€åŒæ­¥**ï¼šä¸å¹³å°çŠ¶æ€ä¿æŒåŒæ­¥

#### å­¦ä¹ è‡ªåŠ¨åŒ–
- **è§†é¢‘è‡ªåŠ¨æ’­æ”¾**ï¼šæ”¯æŒå€é€Ÿæ’­æ”¾
- **è‡ªåŠ¨ç­”é¢˜**ï¼šé¢˜åº“åŒ¹é…å’Œæ™ºèƒ½æ¨ç†
- **è¿›åº¦æ§åˆ¶**ï¼šé˜²æ­¢è¿‡å¿«å®Œæˆå¼•èµ·æ³¨æ„
- **è¡Œä¸ºæ¨¡æ‹Ÿ**ï¼šæ¨¡æ‹ŸçœŸå®å­¦ä¹ è¡Œä¸º

## ğŸ“Š è¿è¡ŒçŠ¶æ€ç›‘æ§

### æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºè¯¦ç»†çš„çŠ¶æ€ä¿¡æ¯ï¼š

```
ğŸ“Š ç³»ç»ŸçŠ¶æ€
============================================================
ğŸ“‹ ä»»åŠ¡ç»Ÿè®¡:
   æ€»ä»»åŠ¡æ•°: 15
   å¯æ¢å¤ä»»åŠ¡: 2
   æŒ‰çŠ¶æ€åˆ†å¸ƒ:
     running: 1
     completed: 10
     paused: 2
     failed: 2

ğŸ¥ ç³»ç»Ÿå¥åº·:
   æ€§èƒ½è¯„åˆ†: 85.2
   å¥åº·çŠ¶æ€: è‰¯å¥½
   é”™è¯¯æ•°é‡: 3
   æ´»è·ƒå‘Šè­¦: 0

ğŸš‘ æ¢å¤ç³»ç»Ÿ:
   å½“å‰è¿›ç¨‹: 12345
   æ´»è·ƒèµ„æº: 2
   æ¢å¤äº‹ä»¶(7å¤©): 5
```

### æ—¥å¿—æ–‡ä»¶ä½ç½®
```
logs/
â”œâ”€â”€ auto_study.log          # ä¸»æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ error.log              # é”™è¯¯æ—¥å¿—
â”œâ”€â”€ performance.log        # æ€§èƒ½æ—¥å¿—
â”œâ”€â”€ automation.log         # è‡ªåŠ¨åŒ–æ“ä½œæ—¥å¿—
â””â”€â”€ recovery.log           # æ¢å¤æ“ä½œæ—¥å¿—
```

### æ•°æ®å­˜å‚¨ä½ç½®
```
data/
â”œâ”€â”€ auto_study.db          # ä¸»æ•°æ®åº“
â”œâ”€â”€ auto_study.pid         # è¿›ç¨‹IDæ–‡ä»¶
â”œâ”€â”€ auto_study.lock        # è¿›ç¨‹é”æ–‡ä»¶
â”œâ”€â”€ courses.json           # è¯¾ç¨‹æ•°æ®
â”œâ”€â”€ user_progress.json     # å­¦ä¹ è¿›åº¦
â””â”€â”€ configs/               # é…ç½®æ–‡ä»¶
    â”œâ”€â”€ retry_strategies.json
    â””â”€â”€ monitoring_rules.json
```

## ğŸ› ï¸ æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜è§£å†³

#### 1. ç³»ç»Ÿå¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version  # éœ€è¦3.8+

# æ£€æŸ¥ä¾èµ–å®‰è£…
pip list | grep -E "(playwright|loguru|rich)"

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt --force-reinstall
```

#### 2. æµè§ˆå™¨å¯åŠ¨å¤±è´¥
```bash
# é‡æ–°å®‰è£…æµè§ˆå™¨
playwright install chromium

# æ£€æŸ¥Chromeæ˜¯å¦æ­£ç¡®å®‰è£…
google-chrome --version  # Linux
"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" --version  # macOS
```

#### 3. ç™»å½•å¤±è´¥
- æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- ç¡®è®¤å­¦ä¹ å¹³å°URLæ˜¯å¦å¯è®¿é—®
- æŸ¥çœ‹æ˜¯å¦éœ€è¦éªŒè¯ç è¯†åˆ«
- æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€

#### 4. æ•°æ®åº“é”å®š
```bash
# æ£€æŸ¥æ˜¯å¦æœ‰æ®‹ç•™è¿›ç¨‹
ps aux | grep auto_study

# åˆ é™¤é”æ–‡ä»¶
rm -f data/auto_study.lock data/auto_study.pid

# é‡å¯ç³»ç»Ÿ
python run.py
```

#### 5. å†…å­˜ä½¿ç”¨è¿‡é«˜
```bash
# æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨
python -c "
from src.auto_study.recovery import PersistenceManager
p = PersistenceManager()
print('æ•°æ®åº“ç»Ÿè®¡:', p.get_database_stats())
p.close()
"

# æ¸…ç†å†å²æ•°æ®
python -c "
from src.auto_study.recovery import StateManager, PersistenceManager
p = PersistenceManager()
s = StateManager(p)
cleaned = s.clean_completed_tasks(keep_hours=24)
print(f'å·²æ¸…ç† {cleaned} ä¸ªå·²å®Œæˆä»»åŠ¡')
s.close()
p.close()
"
```

### æ—¥å¿—åˆ†æ

#### æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```bash
# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
tail -f logs/error.log

# ç»Ÿè®¡é”™è¯¯ç±»å‹
grep -o '"level":"ERROR"' logs/auto_study.log | wc -l

# æŸ¥çœ‹ç‰¹å®šé”™è¯¯
grep "ç™»å½•å¤±è´¥" logs/auto_study.log
```

#### æ€§èƒ½åˆ†æ
```bash
# æŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡
grep "performance_metric" logs/auto_study.log | tail -10

# åˆ†æå“åº”æ—¶é—´
grep "å“åº”æ—¶é—´" logs/performance.log | awk '{print $NF}' | sort -n
```

### æ•°æ®æ¢å¤

#### å¤‡ä»½æ•°æ®åº“
```bash
python -c "
from src.auto_study.recovery import PersistenceManager
from datetime import datetime
p = PersistenceManager()
backup_path = f'backup_{datetime.now().strftime(\"%Y%m%d_%H%M%S\")}.db'
p.backup_database(backup_path)
print(f'å¤‡ä»½å·²åˆ›å»º: {backup_path}')
p.close()
"
```

#### æ¢å¤ä»»åŠ¡çŠ¶æ€
```bash
# æŸ¥çœ‹å¯æ¢å¤çš„ä»»åŠ¡
python -c "
from src.auto_study.recovery import StateManager, PersistenceManager
p = PersistenceManager()
s = StateManager(p)
tasks = s.get_resumable_tasks()
for task in tasks:
    print(f'{task.task_id}: {task.progress:.1f}%')
s.close()
p.close()
"
```

## âš™ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰é‡è¯•ç­–ç•¥
åˆ›å»º `config/retry_strategies.json`ï¼š
```json
{
  "network_error": {
    "max_attempts": 5,
    "base_delay": 1.0,
    "max_delay": 60.0,
    "exponential_base": 2.0
  },
  "auth_error": {
    "max_attempts": 3,
    "base_delay": 5.0,
    "max_delay": 30.0,
    "exponential_base": 2.0
  }
}
```

### ç›‘æ§å‘Šè­¦é…ç½®
åˆ›å»º `config/alert_rules.json`ï¼š
```json
{
  "error_spike": {
    "threshold": 10,
    "time_window": 300,
    "severity": "HIGH"
  },
  "performance_degradation": {
    "response_time_threshold": 5000,
    "severity": "MEDIUM"
  }
}
```

### å­¦ä¹ è¡Œä¸ºé…ç½®
åˆ›å»º `config/learning_behavior.json`ï¼š
```json
{
  "video_watching": {
    "min_watch_time": 0.8,
    "max_speed": 2.0,
    "random_pause": true
  },
  "quiz_answering": {
    "think_time_min": 5,
    "think_time_max": 30,
    "accuracy_rate": 0.85
  }
}
```

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **å‡­æ®ä¿æŠ¤**
   - ä¸è¦å°†ç”¨æˆ·åå¯†ç ç¡¬ç¼–ç åœ¨ä»£ç ä¸­
   - ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–åŠ å¯†å­˜å‚¨æ•æ„Ÿä¿¡æ¯
   - å®šæœŸæ›´æ¢å¯†ç 

2. **è®¿é—®æ§åˆ¶**
   - é™åˆ¶ç³»ç»Ÿè¿è¡Œçš„ç”¨æˆ·æƒé™
   - å®šæœŸæ£€æŸ¥æ—¥å¿—è®¿é—®è®°å½•
   - è®¾ç½®é˜²ç«å¢™è§„åˆ™

3. **æ•°æ®éšç§**
   - å­¦ä¹ è®°å½•æ•°æ®ä»…æœ¬åœ°å­˜å‚¨
   - ä¸ä¸Šä¼ ä¸ªäººæ•æ„Ÿä¿¡æ¯
   - å®šæœŸæ¸…ç†å†å²æ•°æ®

4. **åˆè§„ä½¿ç”¨**
   - éµå®ˆå­¦ä¹ å¹³å°çš„ä½¿ç”¨æ¡æ¬¾
   - ä¸è¦ç”¨äºæ¶æ„ç›®çš„
   - å°Šé‡çŸ¥è¯†äº§æƒ

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç³»ç»Ÿè°ƒä¼˜
```python
# æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
python -c "
from src.auto_study.recovery import PersistenceManager
p = PersistenceManager()
p.vacuum_database()  # å‹ç¼©æ•°æ®åº“
print('æ•°æ®åº“å·²ä¼˜åŒ–')
p.close()
"

# æ¸…ç†è¿‡æœŸæ•°æ®
python -c "
from src.auto_study.recovery import StateManager, PersistenceManager
p = PersistenceManager()
s = StateManager(p)
cleaned_tasks = s.clean_completed_tasks(keep_hours=24)
cleaned_sessions = p.cleanup_expired_sessions()
print(f'å·²æ¸…ç†: {cleaned_tasks} ä¸ªä»»åŠ¡, {cleaned_sessions} ä¸ªä¼šè¯')
s.close()
p.close()
"
```

### èµ„æºç›‘æ§
- ç›‘æ§CPUä½¿ç”¨ç‡ < 80%
- ç›‘æ§å†…å­˜ä½¿ç”¨ç‡ < 70%
- ç›‘æ§ç£ç›˜ç©ºé—´ > 1GBå¯ç”¨
- ç›‘æ§ç½‘ç»œè¿æ¥ç¨³å®šæ€§

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£å…·ä½“é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œå­¦ä¹ å¹³å°çŠ¶æ€  
3. ç¡®è®¤é…ç½®æ–‡ä»¶è®¾ç½®æ­£ç¡®
4. æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

### é—®é¢˜æŠ¥å‘Š
æäº¤é—®é¢˜æ—¶è¯·åŒ…å«ï¼š
- ç³»ç»Ÿç¯å¢ƒä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿã€Pythonç‰ˆæœ¬ï¼‰
- é”™è¯¯æ—¥å¿—ç‰‡æ®µ
- å¤ç°æ­¥éª¤
- é…ç½®æ–‡ä»¶ï¼ˆè„±æ•åï¼‰

### ç‰ˆæœ¬æ›´æ–°
```bash
# æ›´æ–°ç³»ç»Ÿ
git pull origin main
pip install -r requirements.txt --upgrade

# æ£€æŸ¥ç‰ˆæœ¬
python -c "
from src.auto_study.recovery import __version__
print(f'æ¢å¤ç³»ç»Ÿç‰ˆæœ¬: {__version__}')
"
```

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨æ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ç³»ç»Ÿï¼š

```bash
python run.py
```

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šï¼š
1. åˆå§‹åŒ–æ•°æ®åº“å’Œé…ç½®
2. æ£€æŸ¥ä¾èµ–å’Œç¯å¢ƒ
3. å¯åŠ¨ç›‘æ§å’Œæ¢å¤ç³»ç»Ÿ
4. è¿›å…¥è‡ªåŠ¨å­¦ä¹ æµç¨‹

ç¥æ‚¨å­¦ä¹ æ„‰å¿«ï¼ ğŸ“šâœ¨