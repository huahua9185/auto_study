---
name: auto_study
description: 在线教育平台自动学习系统，实现课程自动化完成
status: backlog
created: 2025-09-03T05:57:25Z
---

# PRD: auto_study

## Executive Summary

auto_study 是一个针对宁夏回族自治区专业技术人员继续教育平台（edu.nxgbjy.org.cn）的自动化学习系统。该系统旨在帮助在职人员高效完成继续教育要求，通过自动登录、课程识别、视频播放和进度跟踪等功能，实现无人值守的学习流程自动化，为用户节省大量时间和精力。

## Problem Statement

### 现状问题
- 在职人员需要定期完成继续教育学时，但工作繁忙难以抽出时间
- 视频课程需要连续观看，不能快进，耗时较长
- 平台存在防挂机机制，需要定期互动，无法真正离开电脑
- 手动管理多个课程的学习进度繁琐且容易遗漏

### 为什么现在解决
- 继续教育学时是职称评定和资格维持的硬性要求
- 随着课程数量增加，手动完成的时间成本越来越高
- 技术成熟度已经可以实现稳定的自动化解决方案

## User Stories

### 主要用户画像
**张工程师**
- 角色：在职专业技术人员
- 年龄：35岁
- 痛点：白天工作忙，晚上要照顾家庭，很难有整块时间学习
- 需求：希望能在夜间或工作间隙自动完成学习任务

### 用户旅程

1. **系统配置阶段**
   - 用户提供登录凭据（用户名、密码）
   - 配置学习偏好（学习时间段、课程优先级等）
   - 验证系统连接和登录状态

2. **自动学习阶段**
   - 系统自动登录平台
   - 识别并处理验证码
   - 获取待学习课程列表
   - 按优先级依次完成课程学习
   - 处理防挂机检测

3. **进度监控阶段**
   - 实时查看学习进度
   - 接收学习完成通知
   - 查看学习日志和报告

### 用户故事详细列表

| ID | 作为... | 我希望... | 以便于... | 验收标准 |
|----|---------|-----------|-----------|----------|
| US-01 | 在职人员 | 系统能自动登录学习平台 | 无需手动输入账号密码 | 支持保存凭据，自动填充，识别验证码 |
| US-02 | 在职人员 | 系统能识别未完成的课程 | 优先学习必修课程 | 准确识别课程状态，支持课程分类 |
| US-03 | 在职人员 | 系统能自动播放视频 | 完成学时要求 | 视频播放稳定，支持断点续播 |
| US-04 | 在职人员 | 系统能应对防挂机检测 | 确保学习过程不中断 | 模拟真实用户行为，通过各类检测 |
| US-05 | 在职人员 | 查看学习进度报告 | 了解完成情况 | 实时进度显示，详细日志记录 |
| US-06 | 在职人员 | 系统能自动切换课程 | 连续完成多个课程 | 课程完成后自动进入下一个 |

## Requirements

### Functional Requirements

#### 核心功能模块

1. **自动登录模块**
   - 保存和加密存储用户凭据
   - 自动填充登录表单
   - 集成OCR验证码识别（支持字符型验证码）
   - 登录失败重试机制（最多3次）
   - Session保持和自动续期

2. **课程管理模块**
   - 获取课程列表API调用
   - 解析课程状态（未开始、学习中、已完成）
   - 课程优先级排序（必修优先、截止日期优先）
   - 学习进度持久化存储
   - 断点续学功能

3. **视频学习模块**
   - 自动点击播放按钮
   - 视频播放状态监控
   - 自动处理视频加载异常
   - 支持多种视频播放器类型
   - 播放速度控制（如平台允许）

4. **反检测模块**
   - 随机鼠标移动模拟
   - 键盘事件模拟
   - 随机停顿和操作间隔
   - 浏览器指纹伪装
   - User-Agent轮换
   - 弹窗自动处理（确认、关闭等）

5. **监控报告模块**
   - 实时学习状态显示
   - 学习日志记录（时间戳、课程名、进度）
   - 异常告警通知
   - 学习统计报表生成
   - 数据导出功能（CSV/Excel）

### Non-Functional Requirements

#### 性能要求
- 登录响应时间 < 10秒
- 验证码识别准确率 > 85%
- 单个课程切换时间 < 30秒
- 系统资源占用：CPU < 30%, 内存 < 500MB
- 支持长时间运行（24小时以上）

#### 可靠性要求
- 网络异常自动重连
- 浏览器崩溃自动重启
- 学习进度自动保存（每5分钟）
- 错误自动恢复机制
- 系统可用性 > 95%

#### 安全性要求
- 用户凭据本地加密存储
- 不存储敏感个人信息
- 日志脱敏处理
- 支持代理访问
- HTTPS通信

#### 兼容性要求
- 支持Chrome/Edge浏览器
- 支持Windows/Mac/Linux操作系统
- 适配平台UI变化
- 支持多账号管理

#### 用户体验要求
- 简单的配置界面
- 清晰的状态指示
- 友好的错误提示
- 支持后台运行
- 支持定时任务

## Success Criteria

### 关键指标
- 自动完成率 > 90%（无人工干预完成的课程比例）
- 平均每课时耗时降低 50%以上
- 验证码识别成功率 > 85%
- 防挂机检测通过率 > 95%
- 用户满意度 > 4.0/5.0

### 业务成果
- 用户节省时间：平均每月节省20小时以上
- 学习完成率：从60%提升到95%以上
- 用户粘性：月活跃用户留存率 > 80%

### 技术指标
- 系统稳定性：MTBF（平均无故障时间）> 100小时
- 响应速度：95%的操作响应时间 < 5秒
- 资源效率：同时支持5个以上账号并发运行

## Constraints & Assumptions

### 技术约束
- 依赖Playwright/Selenium等浏览器自动化框架
- 需要稳定的网络连接
- 验证码识别依赖第三方OCR服务或本地模型
- 受限于目标网站的技术架构和反爬策略

### 假设条件
- 目标平台（edu.nxgbjy.org.cn）的基本结构保持稳定
- 用户拥有合法的学习账号
- 平台的防挂机机制不会频繁大幅更新
- 用户有基本的计算机操作能力

### 资源限制
- 开发团队：1-2名开发人员
- 开发周期：4-6周
- 维护成本：需要持续更新以应对平台变化

## Out of Scope

以下功能不在本期实现范围内：
- 考试/测验自动答题功能
- 学习内容的智能总结和知识提取
- 多平台支持（仅支持edu.nxgbjy.org.cn）
- 移动端支持
- 视频内容下载功能
- 学分转换和证书自动申请
- 与其他学习平台的集成
- AI辅助学习建议
- 社交功能（学习小组、讨论区等）

## Dependencies

### 外部依赖
- **目标网站可用性**：edu.nxgbjy.org.cn的正常运行
- **OCR服务**：验证码识别服务（如百度OCR、阿里云OCR）
- **浏览器驱动**：ChromeDriver/EdgeDriver的版本兼容性
- **网络环境**：稳定的互联网连接

### 内部依赖
- **技术栈确定**：Python + Playwright/Selenium
- **数据存储方案**：SQLite/JSON用于进度和配置存储
- **日志系统**：统一的日志收集和分析方案
- **配置管理**：环境变量和配置文件管理

### 第三方库依赖
- Playwright/Selenium WebDriver
- OCR识别库（pytesseract/ddddocr）
- 图像处理库（OpenCV/Pillow）
- 任务调度（APScheduler）
- 数据持久化（SQLAlchemy/TinyDB）

## Risk Analysis

### 高风险
- **平台反爬升级**：平台可能加强反自动化检测
  - 缓解措施：保持代码灵活性，快速适配更新
- **账号封禁风险**：过于明显的自动化行为可能导致封号
  - 缓解措施：加强行为模拟真实性，控制操作频率

### 中风险
- **验证码识别失败**：复杂验证码导致无法登录
  - 缓解措施：集成多种OCR服务，支持手动介入
- **页面结构变化**：网站改版导致元素定位失效
  - 缓解措施：使用多种定位策略，定期检查更新

### 低风险
- **性能问题**：长时间运行导致资源占用过高
  - 缓解措施：定期重启，资源监控和清理

## Implementation Phases

### Phase 1: MVP (Week 1-2)
- 基础登录功能（含简单验证码）
- 课程列表获取
- 单个视频播放
- 基础日志记录

### Phase 2: 核心功能 (Week 3-4)
- 高级验证码识别
- 防挂机检测应对
- 自动课程切换
- 进度保存和恢复

### Phase 3: 优化提升 (Week 5-6)
- 用户界面开发
- 多账号支持
- 详细报告功能
- 性能优化和稳定性提升